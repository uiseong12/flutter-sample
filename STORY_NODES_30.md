# 《보랏빛 규율: 은실로 짠 왕관》 스토리 노드 설계서 (30 Nodes)

## 규칙
- 총 30 노드 (10권 x 권당 3노드)
- 기본 진행: 아래→위, 단계별 분기 3개
- 같은 단계에서 하나 선택 시 동일 단계의 다른 분기 잠금
- 메인 해피엔딩: Node 30의 `[메인] 공동통치 계약 서명`
- 배드엔딩: 주요 노드 선택지에 `BAD_ENDING` 삽입

## 노드 구성

### 1권 《회색 베일의 계약》
1. 계약약혼
2. 조작된 염색샘플
3. 첫 반격

### 2권 《사치금지법의 칼날》
4. 공개 망신의 날
5. 길드 장부
6. 감정 이전의 동맹

### 3권 《불의 재판, 물의 맹세》
7. 신판 소환
8. 물의 맹세문
9. 공개 선언

### 4권 《보랏빛 봉인의 비밀》
10. 왕실색 유출
11. 왕실색 사용권
12. 배신의 밤
- 배드엔딩 분기 포함 (성급한 처분)

### 5권 《은등회의 장부》
13. 은등회 파벌
14. 질서와 변화
15. 침묵의 거리

### 6권 《가짜 왕자의 옷》
16. 사칭 대관식
17. 삼중 권력전
18. 반격의 직조
- 배드엔딩 분기 포함 (권력 균형 붕괴)

### 7권 《밤의 공판》
19. 공개재판 쇼
20. 프레임 전복
21. 상호선택

### 8권 《수도원의 문장》
22. 봉인문서고
23. 순혈신화 붕괴
24. 반동의 파고
- 배드엔딩 분기 포함 (과잉진압)

### 9권 《왕관보다 무거운 것》
25. 이중 전선
26. 은등회 총동원
27. 선언식의 밤

### 10권 《새 규율의 여왕》
28. 새 규율 초안
29. 왕관의 재정의
30. 새 규율의 여왕
- 메인 해피엔딩 분기 포함
- 숨은 배드엔딩 분기 포함

## 구현 메모
- `lib/main.dart`의 `_story` 리스트에 30개 노드 반영
- `branchRouteMap`을 10스텝 x 3분기(총30노드) 동적 생성
- 점선 연결선 + 장거리 스크롤 맵 + 단계 잠금 유지
